<UserControl x:Class="Rogue.NET.Scenario.Views.LevelView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:region="clr-namespace:Rogue.NET.Common.Extension.Prism.RegionManager;assembly=Rogue.NET.Common"
             xmlns:scenarioContentView="clr-namespace:Rogue.NET.Scenario.Content.Views"
             xmlns:coreView="clr-namespace:Rogue.NET.Core.View;assembly=Rogue.NET.Core">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/Rogue.NET.Core;component/Resource/Converter.xaml" />
                <ResourceDictionary Source="pack://application:,,,/Rogue.NET.Common;component/Resource/Dictionaries/ShinyButton.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="280" />
        </Grid.ColumnDefinitions>

        <!-- Level Canvas -->
        <region:RogueRegion region:RogueRegionManager.RegionName="LevelCanvasRegion"
                            region:RogueRegionManager.DefaultViewType="{x:Type scenarioContentView:LevelCanvas}"
                            Grid.ColumnSpan="3"
                            VerticalAlignment="Stretch"
                            HorizontalAlignment="Stretch" />                            

        <!-- (LHS) Player Status / Player Sub-panel -->
        <Grid x:Name="LeftHandSideControls" Grid.Column="0" Background="#CF000000">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <region:RogueRegion region:RogueRegionManager.RegionName="StatusCtrlRegion"
                                region:RogueRegionManager.DefaultViewType="{x:Type scenarioContentView:StatusCtrl}"
                                Margin="10" />

            <region:RogueRegion region:RogueRegionManager.RegionName="PlayerSubpanelRegion"
                                region:RogueRegionManager.DefaultViewType="{x:Type scenarioContentView:PlayerSubpanel}"
                                Grid.Row="1"
                                Margin="10" />
        </Grid>

        <!-- (RHS) Control Panel / Dialog Messages -->
        <Border x:Name="RightHandSideControls"
                Grid.Column="2"
                Background="#CF000000"
                Margin="0, 0, 8, 8"
                BorderBrush="#AFFFFFFF"
                BorderThickness="1"
                CornerRadius="3">
            <StackPanel>
                <!-- General Info Text -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
                    <!-- Scenario Name (# Seed) / Survivor Mode -->
                    <TextBlock x:Name="GeneralInfoTB" 
                               Foreground="Beige" 
                               Margin="8"
                               FontSize="20" 
                               HorizontalAlignment="Left">
                        <Run Text="{Binding ScenarioName}" />
                        <Run Text=" Scenario (# " />
                        <Run Text="{Binding Seed}" />
                        <Run Text=")" />
                    </TextBlock>

                    <!--TextBlock HorizontalAlignment="Right"
                               Margin="8"
                               Foreground="Beige"
                               FontSize="14">
                           <Run Text="Ticks: " />
                           <Run Text="{Binding Ticks}" />
                    </-->
                </StackPanel>

                <!-- Button Panel -->
                <Border>
                    <Border.Background>
                        <SolidColorBrush Color="DarkBlue" Opacity="0.3" />
                    </Border.Background>
                    <StackPanel Orientation="Horizontal" Opacity="1" Margin="4">
                        <Button x:Name="CenterButton" 
                        Background="Black"
                        BorderBrush="White"
                        Click="CenterButton_Click" 
                        Margin="4" 
                        Width="28" 
                        Style="{DynamicResource ShinyTextButtonStyle}" 
                        Cursor="Hand" Height="28" ToolTip="Center on Player">
                            <Button.Content>
                                <coreView:Smiley Height="15" Width="10"
                                         SmileyLineThickness="1"
                                         SmileyColor="{Binding PlayerScenarioImage.SmileyBodyColor, Converter={StaticResource StringColorConverter}}"
                                         SmileyLineColor="{Binding PlayerScenarioImage.SmileyLineColor, Converter={StaticResource StringColorConverter}}"
                                         SmileyMood="{Binding PlayerScenarioImage.SmileyMood}" 
                                         SmileyRadius="2" />
                            </Button.Content>
                        </Button>
                        <Button x:Name="UpButton"     Content="&#xf062;" FontFamily="{StaticResource FontAwesome}" Background="Black" Foreground="White" BorderBrush="White" HorizontalAlignment="Center" Click="UpButton_Click" Margin="4" Style="{DynamicResource ShinyTextButtonStyle}" Width="28" Cursor="Hand" ToolTip="Shift Display Up" Height="28" />
                        <Button x:Name="DownButton"   Content="&#xf063;" FontFamily="{StaticResource FontAwesome}" Background="Black" Foreground="White" BorderBrush="White" HorizontalAlignment="Center" Click="DownButton_Click" Width="28" Style="{DynamicResource ShinyTextButtonStyle}" Height="28" Margin="4" Cursor="Hand" ToolTip="Shift Display Down"/>
                        <Button x:Name="LeftButton"   Content="&#xf060;" FontFamily="{StaticResource FontAwesome}" Background="Black" Foreground="White" BorderBrush="White" HorizontalAlignment="Center" Click="LeftButton_Click" Width="28" Style="{DynamicResource ShinyTextButtonStyle}" Height="28" Margin="4" Cursor="Hand" ToolTip="Shift Display Left" />
                        <Button x:Name="RightButton"  Content="&#xf061;" FontFamily="{StaticResource FontAwesome}" Background="Black" Foreground="White" BorderBrush="White" HorizontalAlignment="Center" Click="RightButton_Click" Margin="4" Width="28" Style="{DynamicResource ShinyTextButtonStyle}" Cursor="Hand" Height="28" ToolTip="Shift Display Right"/>
                        <Button x:Name="ObjectivesButton" Tag="pack://application:,,,/Rogue.NET.Common;component/Resource/Images/Scroll.png" Background="Black" Foreground="White" BorderBrush="White" HorizontalAlignment="Center" Click="ObjectivesButton_Click" Margin="4" Width="28" Style="{DynamicResource ShinyButtonStyle}" Cursor="Hand" Height="28" ToolTip="Scenario Objectives"/>
                        <Button x:Name="HelpButton" 
                                Tag="pack://application:,,,/Rogue.NET.Common;component/Resource/Images/Identify.png" 
                                Background="Black" 
                                BorderBrush="White" 
                                Click="HelpButton_Click"
                                Width="28" 
                                Style="{DynamicResource ShinyButtonStyle}" 
                                Height="28" Margin="4" Cursor="Hand" ToolTip="Help"/>

                    </StackPanel>
                </Border>

                <!-- Dialog Messages -->
                <region:RogueRegion region:RogueRegionManager.RegionName="ScenarioMessageRegion"
                                    region:RogueRegionManager.DefaultViewType="{x:Type scenarioContentView:ScenarioMessageView}"
                                    Margin="4"
                                    VerticalAlignment="Stretch"
                                    HorizontalAlignment="Stretch"
                                    HorizontalContentAlignment="Stretch" 
                                    VerticalContentAlignment="Stretch" />
            </StackPanel>
        </Border>
        
        <!-- (LHS) Collapsed Controls -->
        <Border x:Name="LeftHandSideCollapsedControls" 
                Visibility="Collapsed"
                Grid.ColumnSpan="3" 
                Margin="8,0,0,0"
                Background="#CF000000"
                BorderBrush="#AFFFFFFF"
                BorderThickness="0.75"
                VerticalAlignment="Top" 
                HorizontalAlignment="Left">
            <region:RogueRegion region:RogueRegionManager.RegionName="PlayerStatusSmallPanelRegion" />
        </Border>

        <!-- Survivor Mode -->
        <Border Visibility="{Binding IsSurvivorMode, Converter={StaticResource BoolVisibilityCollapseConverter}}"
                HorizontalAlignment="Center"
                VerticalAlignment="Top"
                Grid.ColumnSpan="3"
                Background="#CF000000">
            <TextBlock 
                Margin="8"
                Text="SURVIVOR MODE"
                Foreground="DarkRed"
                FontSize="24" />
        </Border>
        
        <!-- Objective Acheived  -->
        <Border Visibility="{Binding IsObjectiveAcheived, Converter={StaticResource BoolVisibilityCollapseConverter}}"
                Grid.ColumnSpan="3"
                Grid.Row="1"
                HorizontalAlignment="Center" 
                VerticalAlignment="Bottom"
                Background="#CF000000">
            <TextBlock Text="Objective Acheived! (Proceed to the Exit! Level 1!)" 
                       FontSize="20" 
                       Margin="8">
                <TextBlock.Foreground>
                    <LinearGradientBrush>
                        <GradientStop Color="Red" Offset="0" />
                        <GradientStop Color="Orange" Offset="0.2" />
                        <GradientStop Color="Yellow" Offset="0.4" />
                        <GradientStop Color="Green" Offset="0.6" />
                        <GradientStop Color="Blue" Offset="0.8" />
                        <GradientStop Color="Purple" Offset="1" />
                    </LinearGradientBrush>
                </TextBlock.Foreground>
            </TextBlock>
        </Border>
    </Grid>
</UserControl>
